import{j as e}from"./index-B4h8yNTH.js";import{r as t,u as r,b as s}from"./vendor-DrQyEka1.js";import"./ui-CZusVLl5.js";function i(){const[i,a]=t.useState("orders"),[n,d]=t.useState([]),[l,o]=t.useState([]),[c,m]=t.useState(null),[g,u]=t.useState({name:"",description:"",price:"",category:""}),h=r(),x=localStorage.getItem("adminToken");t.useEffect(()=>{x?(s.defaults.headers.common.Authorization=`Bearer ${x}`,p()):h("/admin/login")},[x,i]);const p=async()=>{var e;try{if("orders"===i){const e=await s.get("/orders");d(e.data.data)}else if("menu"===i){const e=await s.get("/menu");o(e.data.data)}else if("stats"===i){const e=await s.get("/orders/stats");m(e.data.data)}}catch(t){401===(null==(e=t.response)?void 0:e.status)&&(localStorage.removeItem("adminToken"),h("/admin/login"))}};return e.jsxs("div",{style:{padding:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:[e.jsxs("button",{className:"category-pill "+("orders"===i?"active":""),onClick:()=>a("orders"),children:["Orders (",n.length,")"]}),e.jsx("button",{className:"category-pill "+("stats"===i?"active":""),onClick:()=>a("stats"),children:"Revenue Stats"}),e.jsx("button",{className:"category-pill "+("menu"===i?"active":""),onClick:()=>a("menu"),children:"Menu Items"}),e.jsx("button",{className:"category-pill",style:{marginLeft:"auto",background:"transparent",borderColor:"var(--text-muted)"},onClick:()=>{localStorage.removeItem("adminToken"),h("/admin/login")},children:"Logout"})]}),"stats"===i&&c&&e.jsxs("div",{className:"card",style:{padding:"2rem 1.5rem"},children:[e.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center",fontWeight:"800"},children:"Today's Overview"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",padding:"1.5rem",borderRadius:"16px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"var(--success)"},children:["â‚¹",c.revenueToday]}),e.jsx("div",{style:{color:"var(--text-main)",fontWeight:"600"},children:"Revenue (Delivered)"})]}),e.jsxs("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",padding:"1.5rem",borderRadius:"16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"var(--primary)"},children:c.pendingCount}),e.jsx("div",{style:{color:"var(--text-main)",fontWeight:"600"},children:"Pending Orders"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.03)",padding:"1.5rem",borderRadius:"16px",textAlign:"center",gridColumn:"span 2"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"800"},children:c.totalOrdersToday}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"Total Orders Today"})]})]})]}),"menu"===i&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"card",onSubmit:async e=>{e.preventDefault();try{await s.post("/menu",{...g,isAvailable:!0}),u({name:"",description:"",price:"",category:""}),p()}catch(t){alert("Error adding menu item")}},style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Add New Menu Item"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsx("input",{className:"input-field",placeholder:"Name (e.g. Rajma Chawal)",required:!0,value:g.name,onChange:e=>u({...g,name:e.target.value}),style:{marginBottom:0}}),e.jsx("input",{className:"input-field",placeholder:"Price (â‚¹)",type:"number",required:!0,value:g.price,onChange:e=>u({...g,price:e.target.value}),style:{marginBottom:0}}),e.jsx("input",{className:"input-field",placeholder:"Category",required:!0,value:g.category,onChange:e=>u({...g,category:e.target.value}),style:{marginBottom:0}}),e.jsx("input",{className:"input-field",placeholder:"Short Description",required:!0,value:g.description,onChange:e=>u({...g,description:e.target.value}),style:{marginBottom:0}})]}),e.jsx("button",{className:"btn btn-block",style:{marginTop:"1.5rem"},children:"+ Add Item to Menu"})]}),e.jsxs("h3",{style:{marginBottom:"1rem",paddingLeft:"0.5rem"},children:["Current Menu (",l.length,")"]}),e.jsx("div",{style:{overflowX:"auto",background:"rgba(255,255,255,0.8)",borderRadius:"16px",border:"1px solid var(--border)",boxShadow:"var(--glass-shadow)"},children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,87,34,0.05)"},children:[e.jsx("th",{children:"Item Details"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:"700"},children:t.name}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:t.category})]}),e.jsxs("td",{style:{fontWeight:"600"},children:["â‚¹",t.price]}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:t.isAvailable?"var(--success)":"var(--text-muted)"},children:t.isAvailable?"â— Available":"â—‹ Hidden"})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.4rem 0.8rem",fontSize:"0.85rem"},onClick:()=>(async e=>{try{await s.patch(`/menu/${e}/toggle`),p()}catch(t){alert("Error toggling status")}})(t.id),children:"Toggle"})})]},t.id))})]})})]}),"orders"===i&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[n.map(t=>e.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,87,34,0.03)"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"1.1rem"},children:t.customerName}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-muted)",marginTop:"0.2rem"},children:["ðŸ“ž ",t.customerPhone]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"800",fontSize:"1.2rem",color:"var(--primary)"},children:["â‚¹",t.totalAmount]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",marginBottom:"1.25rem",background:"rgba(0,0,0,0.02)",padding:"0.75rem",borderRadius:"8px"},children:[e.jsx("strong",{children:"Delivery To:"}),e.jsx("br",{}),e.jsx("span",{style:{color:"var(--text-muted)"},children:t.address})]}),e.jsxs("div",{style:{fontSize:"0.95rem",marginBottom:"1.5rem"},children:[e.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"Order Details:"}),e.jsx("ul",{style:{listStyle:"none",padding:0},children:t.items.map(t=>{var r;return e.jsxs("li",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.3rem",borderBottom:"1px dashed rgba(0,0,0,0.05)",paddingBottom:"0.3rem"},children:[e.jsxs("span",{children:[e.jsxs("strong",{style:{color:"var(--primary)"},children:[t.quantity,"x"]})," ",(null==(r=t.menuItem)?void 0:r.name)||"Item deleted"]}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:["â‚¹",t.price]})]},t.id)})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.02)",padding:"0.75rem",borderRadius:"8px"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Update Status:"}),e.jsxs("select",{value:t.status,onChange:e=>(async(e,t)=>{try{await s.patch(`/orders/${e}/status`,{status:t}),p()}catch(r){alert("Error updating status")}})(t.id,e.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid var(--border)",fontWeight:"600",outline:"none",background:"white"},children:[e.jsx("option",{value:"Pending",children:"ðŸŸ  Pending"}),e.jsx("option",{value:"Confirmed",children:"ðŸ”µ Confirmed"}),e.jsx("option",{value:"Preparing",children:"ðŸŸ¡ Preparing"}),e.jsx("option",{value:"Delivered",children:"ðŸŸ¢ Delivered"})]})]})]})]},t.id)),0===n.length&&e.jsx("div",{className:"card",style:{textAlign:"center",padding:"3rem 1rem",color:"var(--text-muted)"},children:"No recent orders to display. Catch your breath!"})]})]})}export{i as default};
