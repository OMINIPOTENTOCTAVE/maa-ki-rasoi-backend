import{r as e,a as t,b as s,B as a,R as r,c as l,u as n,d}from"./vendor-DrQyEka1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},o={},c=e,x=Symbol.for("react.element"),m=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,u=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,s){var a,r={},l=null,n=null;for(a in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(n=t.ref),t)f.call(t,a)&&!h.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:x,type:e,key:l,ref:n,props:r,_owner:u.current}}o.Fragment=m,o.jsx=b,o.jsxs=b,i.exports=o;var p=i.exports,g={},y=t;g.createRoot=y.createRoot,g.hydrateRoot=y.hydrateRoot;function j(){const[t,a]=e.useState(""),r=n();return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-brand-cream dark:bg-brand-dark p-4 font-display",children:[p.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 dark:text-white mb-8",children:"Delivery Partner"}),p.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await s.post("/delivery/auth",{phone:t});localStorage.setItem("deliveryToken",e.data.token),r("/")}catch(a){alert("Login failed")}},className:"w-full max-w-sm flex flex-col items-center",children:[p.jsx("input",{type:"tel",placeholder:"Phone Number",value:t,onChange:e=>a(e.target.value),required:!0,className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 mb-4 focus:border-brand-saffron focus:ring-1 focus:ring-brand-saffron text-slate-900 dark:text-white"}),p.jsx("button",{type:"submit",className:"w-full rounded-xl py-3 font-bold text-white shadow-lg bg-brand-saffron hover:bg-[#D97706] transition-colors",children:"Login"})]})]})}function N(){const[t,a]=e.useState({subscriptions:[],instantOrders:[]}),r=n(),l=localStorage.getItem("deliveryToken"),{isMobile:d}=function(){const t=()=>{const e=window.innerWidth;return{isMobile:e<=768,isTablet:e>=769&&e<=1024,isDesktop:e>=1025,isWide:e>=1280}},[s,a]=e.useState(t);return e.useEffect(()=>{let e;const s=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>a(t()))};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(e)}},[]),s}();e.useEffect(()=>{l?(s.defaults.headers.common.Authorization=`Bearer ${l}`,i()):r("/login")},[l]);const i=async()=>{var e;try{const e=await s.get("/delivery/tasks");a(e.data.tasks)}catch(t){401===(null==(e=t.response)?void 0:e.status)&&(localStorage.removeItem("deliveryToken"),r("/login"))}},o=async(e,t)=>{try{await s.post("/delivery/tasks/status",{taskId:e,type:t,status:"Delivered"}),i()}catch(a){alert("Failed to update status")}},c=()=>{localStorage.removeItem("deliveryToken"),r("/login")},x=t.subscriptions.length>0||t.instantOrders.length>0,m=t.subscriptions.filter(e=>"Delivered"!==e.status),f=t.instantOrders.filter(e=>"Delivered"!==e.status),u=p.jsxs(p.Fragment,{children:[!x&&p.jsxs("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400 md:col-span-2",children:[p.jsx("span",{className:"material-symbols-outlined text-4xl mb-4 opacity-50",children:"all_done"}),p.jsx("p",{className:"font-medium",children:"No tasks assigned for today."}),p.jsx("p",{className:"text-sm mt-1",children:"Take a break or check back later!"})]}),m.map(e=>{var t,s,a;return p.jsxs("div",{className:"rounded-xl bg-white dark:bg-[#2d2418] p-4 shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col gap-4 relative overflow-hidden hover:shadow-md transition-shadow",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1.5 h-full bg-brand-saffron"}),p.jsxs("div",{className:"flex justify-between items-start pl-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-lg",children:null==(t=e.subscription.customer)?void 0:t.name}),p.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 flex items-start gap-1",children:[p.jsx("span",{className:"material-symbols-outlined text-[16px] shrink-0 mt-0.5",children:"location_on"}),null==(s=e.subscription.customer)?void 0:s.address]}),p.jsxs("p",{className:"text-xs text-brand-saffron font-medium mt-2 bg-brand-saffron/10 inline-block px-2 py-1 rounded-md",children:["Meal Plan: ",e.mealType," (ðŸŒ¿ Pure Veg)"]})]}),p.jsx("a",{href:`tel:${null==(a=e.subscription.customer)?void 0:a.phone}`,className:"h-10 w-10 flex shrink-0 items-center justify-center rounded-full bg-green-500/10 text-green-600 dark:text-green-400 transition-active active:scale-95",children:p.jsx("span",{className:"material-symbols-outlined",children:"call"})})]}),"ONLINE"===e.subscription.paymentMethod&&"Paid"===e.subscription.paymentStatus?p.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 flex items-center gap-2 text-green-700 dark:text-green-400 font-bold",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),"PREPAID - Do Not Collect Cash"]}):p.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center justify-between text-red-700 dark:text-red-400 font-bold",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"payments"}),"Collect Cash"]}),p.jsxs("span",{className:"text-xl tracking-tight",children:["â‚¹",e.subscription.totalPrice]})]}),p.jsxs("button",{onClick:()=>o(e.id,"subscription"),className:"w-full py-3 mt-1 rounded-xl bg-brand-saffron text-white font-bold text-sm shadow-md flex items-center justify-center gap-2 group active:scale-95 hover:bg-brand-saffron-dark transition-all",children:["Mark Delivered ",p.jsx("span",{className:"material-symbols-outlined text-sm group-hover:translate-x-1 transition-transform",children:"check_circle"})]})]},e.id)}),f.map(e=>p.jsxs("div",{className:"rounded-xl bg-white dark:bg-[#2d2418] p-4 shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col gap-4 relative overflow-hidden hover:shadow-md transition-shadow",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1.5 h-full bg-blue-500"}),p.jsxs("div",{className:"flex justify-between items-start pl-2",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-lg",children:e.customerName}),p.jsx("span",{className:"text-xs font-bold text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-full",children:"INSTANT"})]}),p.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-start gap-1",children:[p.jsx("span",{className:"material-symbols-outlined text-[16px] shrink-0 mt-0.5",children:"location_on"}),e.address]}),p.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-300 font-medium mt-2 bg-slate-100 dark:bg-slate-800 p-2 rounded-md",children:e.items.map(e=>{var t;return p.jsxs("div",{children:["â€¢ ",e.quantity,"x ",(null==(t=e.menuItem)?void 0:t.name)||"Item"]},e.id)})})]}),p.jsx("a",{href:`tel:${e.customerPhone}`,className:"h-10 w-10 flex shrink-0 items-center justify-center rounded-full bg-green-500/10 text-green-600 dark:text-green-400 transition-active active:scale-95",children:p.jsx("span",{className:"material-symbols-outlined",children:"call"})})]}),"ONLINE"===e.paymentMethod&&"Paid"===e.paymentStatus?p.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 flex items-center gap-2 text-green-700 dark:text-green-400 font-bold",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),"PREPAID - Do Not Collect Cash"]}):p.jsxs("div",{className:"mt-2 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center justify-between text-red-700 dark:text-red-400 font-bold",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"payments"}),"Collect Cash"]}),p.jsxs("span",{className:"text-xl tracking-tight",children:["â‚¹",e.totalAmount]})]}),p.jsxs("button",{onClick:()=>o(e.id,"instant"),className:"w-full py-3 mt-1 rounded-xl bg-brand-saffron text-white font-bold text-sm shadow-md flex items-center justify-center gap-2 group active:scale-95 hover:bg-brand-saffron-dark transition-all",children:["Mark Delivered ",p.jsx("span",{className:"material-symbols-outlined text-sm group-hover:translate-x-1 transition-transform",children:"check_circle"})]})]},e.id))]});return d?p.jsxs("div",{className:"flex flex-col h-full min-h-screen w-full bg-brand-cream dark:bg-brand-dark overflow-y-auto no-scrollbar pb-safe font-display text-slate-900",children:[p.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between bg-white/95 dark:bg-[#181511]/95 px-4 py-4 border-b border-gray-100 dark:border-gray-800 shadow-sm",children:[p.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white tracking-tight",children:"Today's Route"}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"relative flex h-3 w-3",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),p.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Online"})]}),p.jsx("button",{onClick:c,className:"text-xs font-bold text-slate-400 hover:text-slate-600",children:"Logout"})]})]}),p.jsx("main",{className:"p-4 flex flex-col gap-4",children:u})]}):p.jsxs("div",{className:"flex h-screen w-full bg-brand-cream dark:bg-brand-dark overflow-hidden",children:[p.jsxs("aside",{className:"w-[250px] shrink-0 bg-white dark:bg-[#1e1710] border-r border-gray-200 dark:border-gray-800 h-screen flex flex-col",children:[p.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-gray-100 dark:border-gray-800",children:[p.jsxs("h1",{className:"font-heading text-xl font-bold text-brand-saffron leading-tight",children:["Maa Ki",p.jsx("br",{}),p.jsx("span",{className:"italic opacity-80",children:"Rasoi"})]}),p.jsx("p",{className:"text-[10px] uppercase tracking-widest text-slate-400 mt-1 font-medium",children:"Delivery Partner"})]}),p.jsx("nav",{className:"flex-1 flex flex-col gap-1 px-3 py-4",children:p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold bg-brand-saffron/10 text-brand-saffron",children:[p.jsx("span",{className:"material-symbols-outlined text-xl",children:"route"}),"Today's Route",p.jsx("span",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-brand-saffron"})]})}),p.jsxs("div",{className:"px-4 pb-4 space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-brand-saffron/5 rounded-lg",children:[p.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Meal Plans"}),p.jsxs("span",{className:"text-sm font-bold text-brand-saffron",children:[m.length," pending"]})]}),p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 dark:bg-blue-900/10 rounded-lg",children:[p.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Instant Orders"}),p.jsxs("span",{className:"text-sm font-bold text-blue-500",children:[f.length," pending"]})]})]}),p.jsxs("div",{className:"px-3 pb-4 border-t border-gray-100 dark:border-gray-800 pt-3 space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2",children:[p.jsxs("span",{className:"relative flex h-3 w-3",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),p.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Online"})]}),p.jsxs("button",{onClick:c,className:"flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-slate-500 hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400 transition-all w-full group",children:[p.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"}),"Logout"]})]})]}),p.jsx("main",{className:"flex-1 overflow-y-auto h-screen",children:p.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white font-heading",children:"Today's Deliveries"}),p.jsxs("div",{className:"text-sm text-slate-500",children:[m.length+f.length," tasks remaining"]})]}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u})]})})]})}function v(){return p.jsx(a,{children:p.jsxs(r,{children:[p.jsx(l,{path:"/",element:p.jsx(N,{})}),p.jsx(l,{path:"/login",element:p.jsx(j,{})})]})})}s.defaults.baseURL="https://maa-ki-rasoi-api.onrender.com",g.createRoot(document.getElementById("root")).render(p.jsx(d.StrictMode,{children:p.jsx(v,{})}));
