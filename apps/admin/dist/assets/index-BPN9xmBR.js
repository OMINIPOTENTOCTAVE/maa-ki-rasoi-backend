import{r as e,a as t,u as r,b as i,B as s,R as a,c as n,N as l,d as o}from"./vendor-DxngJZvr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var d={exports:{}},c={},m=e,u=Symbol.for("react.element"),p=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,g=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(e,t,r){var i,s={},a=null,n=null;for(i in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(n=t.ref),t)h.call(t,i)&&!x.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:u,type:e,key:a,ref:n,props:s,_owner:g.current}}c.Fragment=p,c.jsx=y,c.jsxs=y,d.exports=c;var v=d.exports,f={},b=t;function j(){const[t,s]=e.useState(""),[a,n]=e.useState(""),[l,o]=e.useState("");r();return v.jsx("div",{style:{maxWidth:"400px",margin:"4rem auto",padding:"1rem"},children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"var(--primary)"},children:"Admin Login"}),l&&v.jsx("div",{style:{color:"red",textAlign:"center",marginBottom:"1rem"},children:l}),v.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await i.post("/auth/login",{username:t,password:a});localStorage.setItem("adminToken",e.data.token),window.location.href="/admin/dashboard"}catch(r){o("Invalid credentials")}},children:[v.jsx("input",{className:"input-field",placeholder:"Username",value:t,onChange:e=>s(e.target.value),required:!0}),v.jsx("input",{className:"input-field",type:"password",placeholder:"Password",value:a,onChange:e=>n(e.target.value),required:!0}),v.jsx("button",{className:"btn btn-block",children:"Login"})]})]})})}f.createRoot=b.createRoot,f.hydrateRoot=b.hydrateRoot;const S=[{id:"subscriptions",icon:"card_membership",label:"Subscriptions"},{id:"orders",icon:"receipt_long",label:"Orders"},{id:"team",icon:"local_shipping",label:"Delivery Team"},{id:"menu",icon:"restaurant_menu",label:"Menu"},{id:"stats",icon:"bar_chart",label:"Stats"}];function N({children:e,activeTab:t,onTabChange:r,onLogout:i}){return v.jsxs("div",{className:"flex h-screen w-full overflow-hidden",style:{background:"var(--bg)",color:"var(--text-main)"},children:[v.jsx("a",{href:"#admin-main",className:"sr-only focus:not-sr-only focus:absolute focus:z-[200] focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:rounded-lg focus:font-bold focus:shadow-lg",style:{background:"var(--primary)",color:"#fff"},children:"Skip to content"}),v.jsxs("aside",{role:"navigation","aria-label":"Admin navigation",style:{width:"260px",flexShrink:0,background:"white",borderRight:"1px solid var(--border)",display:"flex",flexDirection:"column",height:"100vh",position:"sticky",top:0},children:[v.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:[v.jsxs("h1",{style:{fontFamily:"'Fraunces', Georgia, serif",fontSize:"1.25rem",fontWeight:800,color:"var(--primary)",lineHeight:1.2},children:["Maa Ki",v.jsx("br",{}),v.jsx("span",{style:{fontStyle:"italic",opacity:.8},children:"Rasoi"})]}),v.jsx("p",{style:{fontSize:"0.625rem",textTransform:"uppercase",letterSpacing:"0.15em",color:"var(--text-muted)",marginTop:"0.25rem",fontWeight:500},children:"Admin Kitchen Panel"})]}),v.jsx("nav",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px",padding:"1rem 0.75rem",overflowY:"auto"},"aria-label":"Admin sections",children:S.map(e=>{const i=t===e.id;return v.jsxs("button",{onClick:()=>r(e.id),"aria-current":i?"page":void 0,"aria-label":`Navigate to ${e.label}`,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,border:"none",cursor:"pointer",transition:"all 0.15s ease",width:"100%",textAlign:"left",outline:"none",background:i?"rgba(200,85,10,0.1)":"transparent",color:i?"var(--primary)":"var(--text-muted)"},onFocus:e=>{e.target.style.boxShadow="0 0 0 2px var(--primary)"},onBlur:e=>{e.target.style.boxShadow="none"},onMouseEnter:e=>{i||(e.currentTarget.style.background="rgba(0,0,0,0.04)")},onMouseLeave:e=>{i||(e.currentTarget.style.background="transparent")},children:[v.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"1.25rem"},children:e.icon}),e.label,i&&v.jsx("span",{style:{marginLeft:"auto",width:"6px",height:"6px",borderRadius:"50%",background:"var(--primary)"}})]},e.id)})}),v.jsx("div",{style:{padding:"0.75rem",borderTop:"1px solid var(--border)"},children:v.jsxs("button",{onClick:i,"aria-label":"Log out",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,border:"none",cursor:"pointer",transition:"all 0.15s ease",width:"100%",textAlign:"left",outline:"none",background:"transparent",color:"var(--text-muted)"},onFocus:e=>{e.target.style.boxShadow="0 0 0 2px #c0392b"},onBlur:e=>{e.target.style.boxShadow="none"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(192,57,43,0.08)",e.currentTarget.style.color="#c0392b"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:[v.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"1.25rem"},children:"logout"}),"Logout"]})})]}),v.jsx("main",{id:"admin-main",role:"main",style:{flex:1,overflowY:"auto",height:"100vh",padding:"1.5rem 2rem"},children:v.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:e})})]})}function w(){const[t,s]=e.useState("subscriptions"),{isMobile:a}=function(){const t=()=>{const e=window.innerWidth;return{isMobile:e<=768,isTablet:e>=769&&e<=1024,isDesktop:e>=1025,isWide:e>=1280}},[r,i]=e.useState(t);return e.useEffect(()=>{let e;const r=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>i(t()))};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),cancelAnimationFrame(e)}},[]),r}(),[n,l]=e.useState([]),[o,d]=e.useState([]),[c,m]=e.useState(null),[u,p]=e.useState([]),[h,g]=e.useState(null),[x,y]=e.useState([]),[f,b]=e.useState({name:"",description:"",price:"",category:""}),[j,S]=e.useState({name:"",phone:"",vehicleDetails:""}),w=r(),k=localStorage.getItem("adminToken");e.useEffect(()=>{k?(i.defaults.headers.common.Authorization=`Bearer ${k}`,C()):w("/admin/login")},[k,t]);const C=async()=>{var e;try{const e=await i.get("/delivery/partners");if(y(e.data.partners),"orders"===t){const e=await i.get("/orders");l(e.data.data)}else if("menu"===t){const e=await i.get("/menu");d(e.data.data)}else if("stats"===t){const e=await i.get("/orders/stats");m(e.data.data)}else if("subscriptions"===t){const e=await i.get("/subscriptions");p(e.data.data);const t=await i.get("/subscriptions/production/today");g(t.data)}}catch(r){401===(null==(e=r.response)?void 0:e.status)&&(localStorage.removeItem("adminToken"),w("/admin/login"))}},A=async(e,t,r)=>{if(t)try{await i.post("/delivery/assign",{partnerId:t,taskId:e,type:r}),C()}catch(s){alert("Error assigning driver")}},D=()=>{localStorage.removeItem("adminToken"),w("/admin/login")},B=v.jsxs("div",{style:{padding:a?"0.5rem":"0"},children:[a&&v.jsxs(v.Fragment,{children:[v.jsx("header",{className:"top-nav",children:v.jsx("h1",{children:"Maa Ki Rasoi - Kitchen"})}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem",padding:"0.5rem"},children:[v.jsx("button",{className:"category-pill "+("subscriptions"===t?"active":""),onClick:()=>s("subscriptions"),children:"Subscriptions"}),v.jsxs("button",{className:"category-pill "+("orders"===t?"active":""),onClick:()=>s("orders"),children:["Orders (",n.length,")"]}),v.jsx("button",{className:"category-pill "+("team"===t?"active":""),onClick:()=>s("team"),children:"Team"}),v.jsx("button",{className:"category-pill "+("stats"===t?"active":""),onClick:()=>s("stats"),children:"Stats"}),v.jsx("button",{className:"category-pill "+("menu"===t?"active":""),onClick:()=>s("menu"),children:"Menu"}),v.jsx("button",{className:"category-pill",style:{marginLeft:"auto",background:"transparent",borderColor:"var(--text-muted)"},onClick:D,children:"Logout"})]})]}),"stats"===t&&c&&v.jsxs("div",{className:"card",style:{padding:"2rem 1.5rem"},children:[v.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center",fontWeight:"800"},children:"Today's Instant Orders"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[v.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",padding:"1.5rem",borderRadius:"16px",textAlign:"center"},children:[v.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"var(--success)"},children:["â‚¹",c.revenueToday]}),v.jsx("div",{style:{color:"var(--text-main)",fontWeight:"600"},children:"Revenue (Delivered)"})]}),v.jsxs("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",padding:"1.5rem",borderRadius:"16px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"var(--primary)"},children:c.pendingCount}),v.jsx("div",{style:{color:"var(--text-main)",fontWeight:"600"},children:"Pending Orders"})]}),v.jsxs("div",{style:{background:"rgba(0,0,0,0.03)",padding:"1.5rem",borderRadius:"16px",textAlign:"center",gridColumn:"span 2"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"800"},children:c.totalOrdersToday}),v.jsx("div",{style:{color:"var(--text-muted)"},children:"Total Orders Today"})]})]})]}),"team"===t&&v.jsxs(v.Fragment,{children:[v.jsxs("form",{className:"card",onSubmit:async e=>{e.preventDefault();try{await i.post("/delivery/partners",j),S({name:"",phone:"",vehicleDetails:""}),C()}catch(t){alert("Error adding partner")}},style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Onboard New Driver"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsx("input",{className:"input-field",placeholder:"Driver Name",required:!0,value:j.name,onChange:e=>S({...j,name:e.target.value}),style:{marginBottom:0}}),v.jsx("input",{className:"input-field",placeholder:"Phone Number",required:!0,value:j.phone,onChange:e=>S({...j,phone:e.target.value}),style:{marginBottom:0}}),v.jsx("input",{className:"input-field",placeholder:"Vehicle Details (Optional)",value:j.vehicleDetails,onChange:e=>S({...j,vehicleDetails:e.target.value}),style:{marginBottom:0,gridColumn:"span 2"}})]}),v.jsx("button",{className:"btn btn-block",style:{marginTop:"1.5rem",background:"#222"},children:"+ Create Driver Profile"})]}),v.jsxs("h3",{style:{marginBottom:"1rem",paddingLeft:"0.5rem"},children:["Active Drivers (",x.length,")"]}),v.jsx("div",{style:{overflowX:"auto",background:"white",borderRadius:"16px",border:"1px solid var(--border)"},children:v.jsxs("table",{className:"admin-table",children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"rgba(0,0,0,0.02)"},children:[v.jsx("th",{children:"Driver Info"}),v.jsx("th",{children:"Phone"}),v.jsx("th",{children:"Vehicle"}),v.jsx("th",{children:"Status"})]})}),v.jsxs("tbody",{children:[x.map(e=>v.jsxs("tr",{children:[v.jsx("td",{style:{fontWeight:"700"},children:e.name}),v.jsx("td",{children:e.phone}),v.jsx("td",{children:e.vehicleDetails||"N/A"}),v.jsx("td",{children:v.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"Active"===e.status?"var(--success)":"var(--text-muted)"},children:e.status})})]},e.id)),0===x.length&&v.jsx("tr",{children:v.jsx("td",{colSpan:"4",style:{textAlign:"center",color:"var(--text-muted)"},children:"No drivers boarded yet."})})]})]})})]}),"subscriptions"===t&&v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[v.jsx("div",{style:{flex:"1 1 300px"},children:h&&v.jsxs("div",{className:"card",style:{borderLeft:"4px solid var(--primary)",padding:"1.5rem",height:"100%"},children:[v.jsx("h2",{style:{marginBottom:"1rem",color:"var(--primary)"},children:"Today's Kitchen Production"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"12px"},children:[v.jsxs("h3",{style:{marginBottom:"0.5rem",fontSize:"1.2rem"},children:["Lunch (",h.stats.lunchSummary.total,")"]}),v.jsx("div",{style:{display:"flex",gap:"1rem"},children:v.jsxs("div",{style:{color:"#2e7d32",fontWeight:"bold"},children:["ðŸŸ¢ Veg: ",h.stats.lunchSummary.total]})})]}),v.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"12px"},children:[v.jsxs("h3",{style:{marginBottom:"0.5rem",fontSize:"1.2rem"},children:["Dinner (",h.stats.dinnerSummary.total,")"]}),v.jsx("div",{style:{display:"flex",gap:"1rem"},children:v.jsxs("div",{style:{color:"#2e7d32",fontWeight:"bold"},children:["ðŸŸ¢ Veg: ",h.stats.dinnerSummary.total]})})]})]})]})}),v.jsx("div",{style:{flex:"2 1 400px"},children:h&&h.data&&v.jsxs("div",{className:"card",style:{height:"100%"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Assign Setup (Today's Scheduled Deliveries)"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",maxHeight:"300px",overflowY:"auto",paddingRight:"0.5rem"},children:[h.data.map(e=>{var t,r;return v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.02)",padding:"0.75rem 1rem",borderRadius:"8px",borderLeft:"3px solid "+("Lunch"===e.mealType?"#2E7D4F":"#E67E22")},children:[v.jsxs("div",{children:[v.jsxs("div",{style:{fontWeight:"bold"},children:[null==(t=e.subscription.customer)?void 0:t.name," (",e.mealType,")"]}),v.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:null==(r=e.subscription.customer)?void 0:r.address})]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"Pending"===e.status?"#E67E22":"#2E7D4F"},children:e.status}),v.jsxs("select",{value:e.deliveryPartnerId||"",onChange:t=>A(e.id,t.target.value,"subscription"),style:{padding:"0.4rem",borderRadius:"6px",border:"1px solid #ddd",fontSize:"0.85rem"},children:[v.jsx("option",{value:"",disabled:!0,children:"Assign Driver"}),x.map(e=>v.jsx("option",{value:e.id,children:e.name},e.id))]})]})]},e.id)}),0===h.data.length&&v.jsx("div",{style:{color:"var(--text-muted)"},children:"No pending deliveries for today."})]})]})})]}),v.jsxs("h3",{style:{marginBottom:"1rem",paddingLeft:"0.5rem"},children:["All Active Subscribers (",u.length,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:u.map(e=>{var t,r;return v.jsx("div",{className:"card",style:{padding:"1.25rem",borderLeft:"4px solid "+("Active"===e.status?"#2E7D4F":"#E67E22")},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{children:[v.jsx("h4",{style:{margin:0,fontSize:"1.1rem"},children:(null==(t=e.customer)?void 0:t.name)||"Customer"}),v.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:["ðŸ“ž ",null==(r=e.customer)?void 0:r.phone]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.5rem"},children:[v.jsx("span",{style:{background:"rgba(0,0,0,0.05)",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:e.planType}),v.jsx("span",{style:{background:"rgba(0,0,0,0.05)",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem"},children:e.mealType}),v.jsx("span",{style:{background:"rgba(46, 125, 79, 0.1)",color:"#2E7D4F",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:"ðŸŸ¢ Pure Veg"})]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["Ends: ",new Date(e.endDate).toLocaleDateString()]})]}),v.jsxs("div",{style:{textAlign:"right"},children:[v.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.2rem",color:"var(--primary)",marginBottom:"0.2rem"},children:["â‚¹",e.totalPrice]}),v.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.5rem",background:"Paid"===e.paymentStatus?"#e8f5e9":"#ffebee",color:"Paid"===e.paymentStatus?"#2e7d32":"#c62828",padding:"2px 6px",borderRadius:"4px",display:"inline-block"},children:["ONLINE"===e.paymentMethod?"ðŸ’³ ONLINE":"ðŸ’µ COD"," â€¢ ",e.paymentStatus]}),v.jsx("br",{}),v.jsx("button",{className:"btn",style:{padding:"0.4rem 0.8rem",fontSize:"0.85rem",background:"Active"===e.status?"rgba(255, 152, 0, 0.1)":"var(--primary)",color:"Active"===e.status?"#C8550A":"white",border:"Active"===e.status?"1px solid #C8550A":"none"},onClick:()=>(async(e,t)=>{const r="Active"===t?"Paused":"Active";try{await i.patch(`/subscriptions/${e}/status`,{status:r}),C()}catch(s){alert("Error toggling subscription status")}})(e.id,e.status),children:"Active"===e.status?"â¸ Pause":"â–¶ Resume"})]})]})},e.id)})})]}),"menu"===t&&v.jsxs(v.Fragment,{children:[v.jsxs("form",{className:"card",onSubmit:async e=>{e.preventDefault();try{await i.post("/menu",{...f,isAvailable:!0}),b({name:"",description:"",price:"",category:""}),C()}catch(t){alert("Error adding menu item")}},style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Add New Menu Item"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsx("input",{className:"input-field",placeholder:"Name (e.g. Rajma Chawal)",required:!0,value:f.name,onChange:e=>b({...f,name:e.target.value}),style:{marginBottom:0}}),v.jsx("input",{className:"input-field",placeholder:"Price (â‚¹)",type:"number",required:!0,value:f.price,onChange:e=>b({...f,price:e.target.value}),style:{marginBottom:0}}),v.jsx("input",{className:"input-field",placeholder:"Category",required:!0,value:f.category,onChange:e=>b({...f,category:e.target.value}),style:{marginBottom:0}}),v.jsx("input",{className:"input-field",placeholder:"Short Description",required:!0,value:f.description,onChange:e=>b({...f,description:e.target.value}),style:{marginBottom:0}})]}),v.jsx("button",{className:"btn btn-block",style:{marginTop:"1.5rem"},children:"+ Add Item to Menu"})]}),v.jsxs("h3",{style:{marginBottom:"1rem",paddingLeft:"0.5rem"},children:["Current Menu (",o.length,")"]}),v.jsx("div",{style:{overflowX:"auto",background:"rgba(255,255,255,0.8)",borderRadius:"16px",border:"1px solid var(--border)",boxShadow:"var(--glass-shadow)"},children:v.jsxs("table",{className:"admin-table",children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"rgba(200,85,10,0.05)"},children:[v.jsx("th",{children:"Item Details"}),v.jsx("th",{children:"Price"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Action"})]})}),v.jsx("tbody",{children:o.map(e=>v.jsxs("tr",{children:[v.jsxs("td",{children:[v.jsx("div",{style:{fontWeight:"700"},children:e.name}),v.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:e.category})]}),v.jsxs("td",{style:{fontWeight:"600"},children:["â‚¹",e.price]}),v.jsx("td",{children:v.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:e.isAvailable?"var(--success)":"var(--text-muted)"},children:e.isAvailable?"â— Available":"â—‹ Hidden"})}),v.jsx("td",{children:v.jsx("button",{className:"btn btn-secondary",style:{padding:"0.4rem 0.8rem",fontSize:"0.85rem"},onClick:()=>(async e=>{try{await i.patch(`/menu/${e}/toggle`),C()}catch(t){alert("Error toggling status")}})(e.id),children:"Toggle"})})]},e.id))})]})})]}),"orders"===t&&v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[n.map(e=>v.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[v.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(200,85,10,0.03)"},children:[v.jsxs("div",{children:[v.jsx("strong",{style:{fontSize:"1.1rem"},children:e.customerName}),v.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-muted)",marginTop:"0.2rem"},children:["ðŸ“ž ",e.customerPhone]})]}),v.jsxs("div",{style:{textAlign:"right"},children:[v.jsxs("div",{style:{fontWeight:"800",fontSize:"1.2rem",color:"var(--primary)",marginBottom:"0.2rem"},children:["â‚¹",e.totalAmount]}),v.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.2rem",background:"Paid"===e.paymentStatus?"#e8f5e9":"#ffebee",color:"Paid"===e.paymentStatus?"#2e7d32":"#c62828",padding:"2px 6px",borderRadius:"4px",display:"inline-block"},children:["ONLINE"===e.paymentMethod?"ðŸ’³ ONLINE":"ðŸ’µ COD"," â€¢ ",e.paymentStatus]}),v.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),v.jsxs("div",{style:{padding:"1.25rem"},children:[v.jsxs("div",{style:{fontSize:"0.95rem",marginBottom:"1.25rem",background:"rgba(0,0,0,0.02)",padding:"0.75rem",borderRadius:"8px",display:"flex",justifyContent:"space-between"},children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Delivery To:"}),v.jsx("br",{}),v.jsx("span",{style:{color:"var(--text-muted)"},children:e.address})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem"},children:[v.jsx("strong",{style:{color:"var(--primary)"},children:"Assign Driver:"}),v.jsxs("select",{value:e.deliveryPartnerId||"",onChange:t=>A(e.id,t.target.value,"instant"),style:{padding:"0.4rem",borderRadius:"6px",border:"1px solid #ddd",fontSize:"0.85rem"},children:[v.jsx("option",{value:"",disabled:!0,children:"Select Driver"}),x.map(e=>v.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),v.jsxs("div",{style:{fontSize:"0.95rem",marginBottom:"1.5rem"},children:[v.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"Order Details:"}),v.jsx("ul",{style:{listStyle:"none",padding:0},children:e.items.map(e=>{var t;return v.jsxs("li",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.3rem",borderBottom:"1px dashed rgba(0,0,0,0.05)",paddingBottom:"0.3rem"},children:[v.jsxs("span",{children:[v.jsxs("strong",{style:{color:"var(--primary)"},children:[e.quantity,"x"]})," ",(null==(t=e.menuItem)?void 0:t.name)||"Item deleted"]}),v.jsxs("span",{style:{color:"var(--text-muted)"},children:["â‚¹",e.price]})]},e.id)})})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.02)",padding:"0.75rem",borderRadius:"8px"},children:[v.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Update Status:"}),v.jsxs("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await i.patch(`/orders/${e}/status`,{status:t}),C()}catch(r){alert("Error updating status")}})(e.id,t.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid var(--border)",fontWeight:"600",outline:"none",background:"white"},children:[v.jsx("option",{value:"Pending",children:"ðŸŸ  Pending"}),v.jsx("option",{value:"Confirmed",children:"ðŸ”µ Confirmed"}),v.jsx("option",{value:"Preparing",children:"ðŸŸ¡ Preparing"}),v.jsx("option",{value:"Delivered",children:"ðŸŸ¢ Delivered"})]})]})]})]},e.id)),0===n.length&&v.jsx("div",{className:"card",style:{textAlign:"center",padding:"3rem 1rem",color:"var(--text-muted)"},children:"No recent orders to display. Catch your breath!"})]})]});return a?v.jsx("div",{className:"app-container",children:v.jsx("main",{className:"main-content",children:B})}):v.jsx(N,{activeTab:t,onTabChange:s,onLogout:D,children:B})}i.defaults.baseURL="https://maa-ki-rasoi-api.onrender.com";const k=()=>v.jsx("header",{className:"top-nav",children:v.jsx("h1",{children:"Maa Ki Rasoi - Kitchen"})});function C(){return v.jsx(s,{children:v.jsxs(a,{children:[v.jsx(n,{path:"/",element:v.jsx(l,{to:"/admin",replace:!0})}),v.jsx(n,{path:"/admin/login",element:v.jsxs("div",{className:"app-container",children:[v.jsx(k,{}),v.jsx("main",{className:"main-content",children:v.jsx(j,{})})]})}),v.jsx(n,{path:"/admin/*",element:v.jsx(w,{})}),v.jsx(n,{path:"*",element:v.jsx(l,{to:"/admin",replace:!0})})]})})}f.createRoot(document.getElementById("root")).render(v.jsx(o.StrictMode,{children:v.jsx(C,{})}));
